<UserControl x:Class="SimElation.SimHubIntegration.SliProPlugin.SegmentDisplayControl"
			 x:Name="SegmentDisplayControlObject"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:styles="clr-namespace:SimHub.Plugins.Styles;assembly=SimHub.Plugins"
             xmlns:ui="clr-namespace:SimHub.Plugins.UI;assembly=SimHub.Plugins"
 			 xmlns:autogrid="clr-namespace:WpfAutoGrid;assembly=WpfAutoGrid"
			 xmlns:converters="clr-namespace:SimElation.SimHubIntegration.SliProPlugin.Utils.ValueConverters"
             mc:Ignorable="d"
			 Loaded="OnLoaded">
	<UserControl.Resources>
		<converters:NotConverter x:Key="NotConverter" />
	</UserControl.Resources>
	<GroupBox Header="{Binding Label, ElementName=SegmentDisplayControlObject}">
		<StackPanel Orientation="Vertical" Margin="0,5,0,5">

			<styles:SHSection Title="Rotary control">
				<!-- NB bug with RowCount 1 https://github.com/carbonrobot/wpf-autogrid/issues/6 -->
				<autogrid:AutoGrid RowCount="2" Columns="2*,5*,5*">
					<Label Content="Enabled" VerticalAlignment="Center"/>
					<styles:SHToggleButton HorizontalAlignment="Left"
										   IsChecked="{Binding IsRotaryControlled, ElementName=SegmentDisplayControlObject, Mode=TwoWay}"/>
					<styles:SHButtonPrimary VerticalAlignment="Center" x:Name="learnRotaryButton"
											IsEnabled="{Binding IsRotaryControlled, ElementName=SegmentDisplayControlObject}"
											Content="{Binding LearnRotaryButtonContent, ElementName=SegmentDisplayControlObject}"
											ToolTip="Learn or forget a rotary switch attached to the SLI-Pro to control what is shown in the segment display." />
				</autogrid:AutoGrid>
			</styles:SHSection>

			<styles:SHSection Title="Manual / button control"
							  IsEnabled="{Binding IsRotaryControlled, ElementName=SegmentDisplayControlObject, Converter={StaticResource NotConverter}}">
				<StackPanel Orientation="Vertical">
					<!-- NB bug with RowCount 1 https://github.com/carbonrobot/wpf-autogrid/issues/6 -->
					<autogrid:AutoGrid RowCount="2" Columns="2*,5*,5*">
						<Label Content="Mode" VerticalAlignment="Center"/>
						<ComboBox VerticalAlignment="Center"
								  ItemsSource="{Binding ItemsSource, ElementName=SegmentDisplayControlObject}"
								  SelectedIndex="{Binding SelectedIndex, ElementName=SegmentDisplayControlObject}"/>
					</autogrid:AutoGrid>

					<StackPanel Orientation="Vertical" Margin="4,4,2,0">
						<ui:ControlsEditor FriendlyName="Next" x:Name="nextButtonEditor"/>
						<ui:ControlsEditor FriendlyName="Previous" x:Name="previousButtonEditor"/>
					</StackPanel>
				</StackPanel>
			</styles:SHSection>
		</StackPanel>
	</GroupBox>
	
</UserControl>
